{% extends 'base.html' %}

{% block title %}Retirement Planner{% endblock %}

{% block content %}
<div class="container mt-4">

    <h2 class="text-center mb-4">ðŸ§® Retirement Planner</h2>

    <form method="POST" action="{{ url_for('projects.retirement') }}">
        <div class="row g-3">
            <div class="col-md-3">
                <label class="form-label">Current Age</label>
                <input type="number" name="current_age" class="form-control" value="53" required>
            </div>

            <div class="col-md-3">
                <label class="form-label">Retirement Age</label>
                <input type="number" name="retirement_age" class="form-control" value="57" required>
            </div>

            <div class="col-md-3">
                <label class="form-label">Monthly Savings ($)</label>
                <input type="number" name="annual_saving" class="form-control" value="8000" required>
            </div>

            <div class="col-md-3">
                <label class="form-label">Expected Return Rate (%)</label>
                <input type="number" name="return_rate" step="0.01" class="form-control" value="7.0" required>
            </div>

            <div class="col-md-3">
                <label class="form-label">Expected Lifespan (Age)</label>
                <input type="number" name="lifespan" class="form-control" value="90" required>
            </div>

            <div class="col-md-3">
                <label class="form-label">Monthly Living Expense ($)</label>
                <input type="number" name="monthly_living_expense" class="form-control" value="7000" required>
            </div>

            <div class="col-md-3">
                <label class="form-label">Inflation Rate (%)</label>
                <input type="number" name="inflation_rate" class="form-control" value="2.0" required>
            </div>

            <div class="col-md-3">
                <label class="form-label">Current Assets ($)</label>
                <input type="number" name="current_assets" class="form-control" value="1000000" required>
            </div>

            <div class="col-md-3">
                <label class="form-label">Living Expense Support / CPP (Monthly $)</label>
                <input type="number" name="cpp_support" class="form-control" value="0">
            </div>

            <div class="col-md-3">
                <label class="form-label">Extended Year From (Age)</label>
                <input type="number" name="cpp_from_age" class="form-control" value="65">
            </div>

            <div class="col-md-3">
                <label class="form-label">Extended Year To (Age)</label>
                <input type="number" name="cpp_to_age" class="form-control" value="90">
            </div>

            <div class="col-md-3">
                <label class="form-label">Asset Liquidation Amount 1</label>
                <input type="number" name="asset_liquidation_1" class="form-control" value="0">
            </div>

            <div class="col-md-3">
                <label class="form-label">When (Age)</label>
                <input type="number" name="asset_liquidation_age_1" class="form-control" value="0">
            </div>

            <div class="col-md-3">
                <label class="form-label">Asset Liquidation Amount 2</label>
                <input type="number" name="asset_liquidation_2" class="form-control" value="0">
            </div>

            <div class="col-md-3">
                <label class="form-label">When (Age)</label>
                <input type="number" name="asset_liquidation_age_2" class="form-control" value="0">
            </div>

            <div class="col-md-3">
                <label class="form-label">Asset Liquidation Amount 3</label>
                <input type="number" name="asset_liquidation_3" class="form-control" value="0">
            </div>

            <div class="col-md-3">
                <label class="form-label">When (Age)</label>
                <input type="number" name="asset_liquidation_age_3" class="form-control" value="0">
            </div>
        </div>

        <div class="text-center mt-4">
            <button type="submit" class="btn btn-primary px-4">Calculate</button>
        </div>
    </form>

    {% if result %}
    <div class="alert alert-success mt-5 text-center">
        <h4>ðŸ“ˆ Estimated Total Retirement Savings: <strong>${{ "{:,.2f}".format(result) }}</strong></h4>
        <p>at retirement age {{ retirement_age }}</p>
    </div>
    {% endif %}

    {% if table %}
    <div class="table-responsive mt-5">
        <h5>Retirement Projection Table</h5>
        <table class="table table-bordered table-sm text-center">
            <thead class="table-light">
                <tr>
                    <th>Age</th>
                    <th>Year</th>
                    <th>Retire?</th>
                    <th>Living Exp.</th>
                    <th>Living Exp. â€“ Ret.</th>
                    <th>Savings â€“ Before Retire</th>
                    <th>Asset</th>
                    <th>Asset â€“ Working Years</th>
                    <th>Asset â€“ Retirement</th>
                    <th>Investment Return</th>
                    <th>Withdrawal Rate</th>
                </tr>
            </thead>
            <tbody>
                {% for row in table %}
                <tr>
                    {% for cell in row %}
                    <td>{{ cell }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}

</div>
{% endblock %}


